<!-- FORM -->
<section class="container-fluid container-lg d-flex justify-content-center p-5">
    <form [formGroup]="contactForm" (ngSubmit)="onSubmit()">
       <!-- user -->
       <section class="row row-cols-1 d-flex" formGroupName="user">
           
        <!-- name -->
           <div class="col-6 mb-3">
               <label for="name" class="form-label fs-6 text-uppercase fw-bold">Nome</label>
               <input type="text" class="form-control bg-light f-6" name="name" id="name" placeholder="nome" formControlName="name">
             
               <!-- messaggio di errore -->
             <span class="help-block text-primary ps-2" *ngIf="contactForm.get('user.name')?.invalid && contactForm.get('user.name')?.touched"> campo obbligatorio</span>
             
              </div>
             <div class="col-6 mb-3">
               <label for="surname" class="form-label  fs-6 text-uppercase fw-bold">Cognome</label>
               <input type="text" class="form-control bg-light f-6 " name="surname" id="surname" placeholder="cognome" formControlName="surname">
             
               <!-- messaggio di errore -->
             <span class="help-block text-primary ps-2" *ngIf="contactForm.get('user.surname')?.invalid && contactForm.get('user.surname')?.touched"> campo obbligatorio</span>

             </div>
             <div class="col-6 mb-3">
               <label for="email" class="form-label  fs-6 text-uppercase fw-bold">Email </label>
               <input type="email" class="form-control bg-light f-6" name="email" id="email" aria-describedby="emailHelp" placeholder="indirizzo email" formControlName="email">
               
                 <!-- messaggio di errore -->
             <span class="help-block text-primary ps-2" *ngIf="contactForm.get('user.email')?.invalid && contactForm.get('user.email')?.touched">

              <!-- campo obbligatorio -->
                <span *ngIf="contactForm.get('user.email')?.errors?.['required']">
                  campo obbligatorio</span>

                <!-- controllo email -->
                <span *ngIf="contactForm.get('user.email')?.errors?.['email']">
                  email non valida</span>

             </span>


             </div>
             <div class="col-6 mb-3">
               
               <label for="telephone" class="form-label  fs-6 text-uppercase fw-bold">Telefono</label>
               <input type="tel" class="form-control bg-light " name="telephone" id="telephone" placeholder="numero di telefono" formControlName="telephone">

                 <!-- messaggio di errore -->
             <span class="help-block text-primary ps-2" *ngIf="contactForm.get('user.telephone')?.invalid && contactForm.get('user.telephone')?.touched">

              <!-- campo obbligatorio -->
                <span *ngIf="contactForm.get('user.telephone')?.errors?.['required']">
                  campo obbligatorio</span>

                <!-- controllo email -->
                <span *ngIf="contactForm.get('user.telephone')?.errors?.['pattern']">
                  numero di telefono non valido</span>

             </span>

             </div>
            </section>
   
             <!-- message -->
             <div class="col-12">  
               <label for="message" class="fs-6 text-uppercase fw-bold pb-2" >Messaggio</label>
               <textarea class="f-6" name="message" id="message" cols="20"  rows="10" class=" bg-light form-control" placeholder="Scrivi le tue richieste, grazie." formControlName="message"></textarea>
                
               <!-- messaggio di errore -->
             <span class="help-block text-primary ps-2" *ngIf="contactForm.get('message')?.invalid && contactForm.get('message')?.touched">

              <span *ngIf="contactForm.get('message')?.errors?.['required']">
                campo obbligatorio</span>
                <!-- controllo min -->
                <span *ngIf="contactForm.get('message')?.errors?.['minlength']">
                 messaggio troppo corto</span>

                <span *ngIf="contactForm.get('message')?.errors?.['maxlength']">
                 messaggio troppo lungo</span>

             </span>

           </div>


        
        <section class="col-12 d-flex flex-column mt-2 gap-3 p-4" formGroupName="consent">
            <div class="w-100 d-flex flex-column">
                <p class="fs-5 fw-bold"> Consenso a ricevere mail per marketing </p>
                <div class="form-check">
                    <input class="form-check-input" type="radio" name="marketing" value= "accept"  id="accept" formControlName="marketing">
                    <label class="form-check-label f-6" for="flexRadioDefault1">
                      Accetto
                    </label>
                  </div>
                  <div class="form-check">
                    <input class="form-check-input" type="radio" name="marketing" value= "not-accept" id="not-accept" formControlName="marketing">
                    <label class="form-check-label f-6" for="flexRadioDefault2">
                      Non accetto
                    </label>
                  </div>
                  <p class="fs-6"> Letta l'<a class="text-success fw-bold text-justify link" href="*"> Informativa Privacy </a>, clicando su 'accetto' acconsento al trattamento dei miei dati personali per i fini marketing e commerciali descritti al punto 2.3. </p>
            </div>
            
                <div class="w-100 d-flex flex-column gap-2">
                    <p class="fs-5 fw-bold"> Policy Privacy </p>
                    <div class="form-check">
                        <input class="form-check-input fs-6" type="checkbox" name="accept-personal-date" value="accept-personal-date" id="accept-personal-date" formControlName="privacy">
                        <label class="form-check-label fs-6" for="flexRadioDefault1">
                          Accetto che <a href="#" class=" fw-bold text-success link">i miei dati personali vengano elaborati</a> 
                        </label>
                      </div>
                </div>
        </section>


        <section class="col ms-auto d-flex align-items-center">
            <button class="w-50 mx-auto my-3 btn btn-warning" type="submit" [disabled]="contactForm.invalid"> Invia </button>
        </section>
    </form>
</section>

<!-- passo i dati della form al componente modal e lo visualizzo soltanto se Ã¨ stato cliccato il button 'invia' -->

<app-modal *ngIf="isSubmitted" [payload]="payload"></app-modal>